################################
# Run Linter against code base #
################################

name: main_workflow
on: [push]
jobs:
  eslintr_ejecucion:
    runs-on: ubuntu-latest
    steps:
      - name: checkout_codigo
        uses: actions/checkout@v2
      - name: Install dependencies
        run: |
          npm install

      - name: Lint files
        run: |
          npm run lint
   
  cypress_ejecucion:
    runs-on: ubuntu-latest
  #   needs: eslintr_ejecucion
  #   # if: github.ref == 'refs/heads/nodejs_jest_job'
    steps:
      - name: checkout_codigo
        uses: actions/checkout@v2
      - name: Cypress run
        uses: cypress-io/github-action@v2
        # let's give this action an ID so we can refer
        # to its output values later
        id: cypress
        # Continue the build in case of an error, as we need to set the
        # commit status in the next step, both in case of success and failure
        continue-on-error: true
      - name: 'Result artifact'
        run: |
          echo ${{ steps.cypress.outputs }}  > result.txt
      - name: 'Upload Artifact'
        uses: actions/upload-artifact@v2
        
        with:
          name: my-artifact
          path: result.txt
            









#     - name: checkout_codigo
#       uses: actions/checkout@v2
#     - name: Run jest tests
#       run: npm install jest && npm test
  # environment_test_execution:
  #   runs-on: ubuntu-latest
  #   needs: test-execution
  #   # if: github.ref == 'refs/heads/nodejs_environment_job'
    
  #   steps:
  #     - name: Test Javascript Hello Action
  #       uses: adeloyedeji/github-actions-hello@v1.0
  #       env:
  #         DESTINATION_PERSON: 2DAW
  #       with: 
  #         who-to-greet: ${{ env.DESTINATION_PERSON }}
  